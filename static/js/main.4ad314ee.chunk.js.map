{"version":3,"sources":["components/Form.module.css","components/Form.js","components/PaymentModal.js","components/ReconnectingStatus.js","components/AnalysisSection.js","api.js","App.js","reportWebVitals.js","index.js"],"names":["module","exports","Form","_ref","onSubmit","formData","setFormData","useState","name","gender","calendarType","year","month","day","hour","minute","province","city","years","Array","from","length","_","i","days","hours","toString","padStart","minutes","provinces","citydata","filter","item","pid","cities","filteredCities","selectedProvince","find","prov","id","_jsxs","e","preventDefault","alert","genders","solarDate","lunarMonth","isLeap","console","log","startsWith","lunarDate","window","p","Lunar2Solar","selectedCity","c","J","j","W","w","eightCharacter","transformUserData","raw","datetimeStr","txt","sz","join","xb","dyItems","Object","keys","a","push","fatemaps","parseInt","className","styles","formContainer","children","_jsx","formRow","inputGroup","type","placeholder","underlineInput","value","onChange","target","buttonGroup","map","choiceButton","active","onClick","formRow1","dateSelectGroup","dateSelect","index","timeSelectGroup","formRow3","style","marginRight","disabled","submitButton","PaymentModal","isOpen","qrcodeUrl","onClose","countdown","setCountdown","useEffect","timer","setInterval","prev","Math","max","clearInterval","_Fragment","QRCodeSVG","size","fgColor","level","seconds","floor","ReconnectingStatus","analysisType","ANALYSIS_TYPES","icon","color","AnalysisSection","preview","unlocked","contents","onUnlock","onGoBack","onComplete","displayContent","setDisplayContent","blurContent","setBlurContent","selectedType","setSelectedType","loadingType","setLoadingType","isReconnecting","setIsReconnecting","reconnectingType","setReconnectingType","contentRef","useRef","isShared","setIsShared","isCopied","setIsCopied","watermarkImage","Image","src","splitIndex","slice","forEach","localStorage","getItem","every","ref","ReactMarkdown","async","navigator","clipboard","writeText","location","href","setTimeout","confirm","err","backgroundColor","typeId","_ANALYSIS_TYPES$find","t","error","handleUnlock","canvas","html2canvas","current","useCORS","allowTaint","logging","watermarkCanvas","document","createElement","ctx","getContext","width","height","drawImage","fillStyle","font","textAlign","textBaseline","fillText","globalAlpha","finalUrl","toDataURL","link","download","Date","toLocaleDateString","body","appendChild","click","removeChild","BASE_URL","createEventSourceWithRecovery","url","handlers","arguments","undefined","analysisId","separator","includes","es","EventSource","onopen","onerror","_handlers$onError","onError","call","close","App","analysisData","setAnalysisData","currentOrderId","health","career","wealth","marriage","paymentState","setPaymentState","show","processingType","loading","setLoading","setError","setES","data","setItem","JSON","stringify","saveAnalysisToLocalStorage","loadedData","loadAnalysisFromLocalStorage","parsedData","parse","alt","paymentES","initiatePayment","prevOrderId","addEventListener","_handlers$onPaymentQR","onPaymentQR","orderId","_handlers$onAnalysisR","_handlers$onPaymentst","content","onAnalysisRestore","onPaymentstatus","_handlers$onAnalysisC","onAnalysisChunk","_handlers$onAnalysisE","onAnalysisEnd","_handlers$onError3","message","chunk","fullContent","analysisTypes","clearAnalysisData","removeItem","newES","createOrderStream","eightCharacters","encodeURIComponent","_handlers$onStream","onStream","_handlers$onComplete","_handlers$onError2","qrcode","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","createRoot","getElementById","render","React","StrictMode"],"mappings":"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","file":"static/js/main.4ad314ee.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"formContainer\":\"Form_formContainer__30bom\",\"formRow\":\"Form_formRow__3daMv\",\"formRow1\":\"Form_formRow1__XS48M\",\"formRow3\":\"Form_formRow3__3AhXh\",\"inputGroup\":\"Form_inputGroup__EaPaw\",\"underlineInput\":\"Form_underlineInput__1EWfm\",\"optional\":\"Form_optional__5hbdU\",\"buttonGroup\":\"Form_buttonGroup__7LocG\",\"choiceButton\":\"Form_choiceButton__MMaii\",\"active\":\"Form_active__TTwYc\",\"dateSelectGroup\":\"Form_dateSelectGroup__32CjE\",\"dateSelect\":\"Form_dateSelect__3YUVx\",\"timeSelectGroup\":\"Form_timeSelectGroup__3IR3b\",\"underlineSelect\":\"Form_underlineSelect__1jtox\",\"citySelect\":\"Form_citySelect__3SZdv\",\"submitButton\":\"Form_submitButton__1NJMU\"};","import React, { useState } from 'react';\r\nimport styles from './Form.module.css';\r\nimport citydata from \"./city.json\"\r\n\r\nconst Form = ({ onSubmit }) => {\r\n  const [formData, setFormData] = useState({\r\n    name: '',\r\n    gender: 'ç”·', // è®¾ç½®é»˜è®¤å€¼\r\n    calendarType: 'å…¬å†', // è®¾ç½®é»˜è®¤å€¼\r\n    year: '',\r\n    month: '',\r\n    day: '',\r\n    hour: '00',\r\n    minute: '00',\r\n    province: '',\r\n    city: ''\r\n  });\r\n\r\n  // ç”Ÿæˆå¹´ä»½é€‰é¡¹ï¼ˆ1900-2050ï¼‰\r\n  const years = Array.from({length: 151}, (_, i) => 1900 + i);\r\n  // const months = Array.from({length: 12}, (_, i) => i + 1);\r\n  const days = Array.from({length: 31}, (_, i) => i + 1);\r\n  // å†œå†æœˆä»½é€‰é¡¹ï¼ŒåŒ…æ‹¬å¯èƒ½çš„é—°æœˆ\r\n  const updateMonthOptions = () => {\r\n    if (formData.calendarType === 'å†œå†') {\r\n      return [\r\n        'æ­£æœˆ', 'äºŒæœˆ', 'ä¸‰æœˆ', 'å››æœˆ', 'äº”æœˆ', 'å…­æœˆ',\r\n        'ä¸ƒæœˆ', 'å…«æœˆ', 'ä¹æœˆ', 'åæœˆ', 'åä¸€æœˆ', 'åäºŒæœˆ',\r\n        'é—°æ­£æœˆ', 'é—°äºŒæœˆ', 'é—°ä¸‰æœˆ', 'é—°å››æœˆ', 'é—°äº”æœˆ', 'é—°å…­æœˆ',\r\n        'é—°ä¸ƒæœˆ', 'é—°å…«æœˆ', 'é—°ä¹æœˆ', 'é—°åæœˆ', 'é—°åä¸€æœˆ', 'é—°åäºŒæœˆ'\r\n      ];\r\n    }\r\n    return Array.from({length: 12}, (_, i) => i + 1);\r\n  };\r\n  \r\n  // ç”Ÿæˆæ—¶é—´é€‰é¡¹\r\n  const hours = Array.from({length: 24}, (_, i) => i.toString().padStart(2, '0'));\r\n  const minutes = Array.from({length: 60}, (_, i) => i.toString().padStart(2, '0'));\r\n  //è®¾ç½®çœä»½ã€åŸå¸‚è§„åˆ™\r\n  const provinces = citydata.city.filter(item => item.pid === 0);\r\n  const cities = citydata.city.filter(item => item.pid !== 0);\r\n\r\n  const handleProvinceChange = (e) => {\r\n    setFormData({\r\n      ...formData,\r\n      province: e.target.value,\r\n      city: 'unknown'\r\n    });\r\n  };\r\n\r\n  const handleCityChange = (e) => {\r\n    setFormData({ ...formData, city: e.target.value });\r\n  };\r\n\r\n  const filteredCities = cities.filter(city => {\r\n    const selectedProvince = provinces.find(prov => prov.name === formData.province);\r\n    return selectedProvince && city.pid === selectedProvince.id;\r\n  });\r\n  \r\n\r\n// ç¡®ä¿åœ¨ç»„ä»¶é¡¶éƒ¨å®šä¹‰äº†handleSubmitå‡½æ•°\r\nconst handleSubmit = (e) => {\r\n  e.preventDefault(); // å¿…é¡»é˜»æ­¢é»˜è®¤è¡Œä¸º\r\n  // console.log('æäº¤æ•°æ®ï¼š', formData);\r\n  \r\n  // æ·»åŠ åŸºç¡€éªŒè¯\r\n  if (!formData.year || !formData.month || !formData.day) {\r\n    alert('è¯·é€‰æ‹©å®Œæ•´çš„å‡ºç”Ÿæ—¥æœŸ');\r\n    return;\r\n  }\r\n  if (formData.province === 'unknown' || formData.city === 'unknown') {\r\n    alert('è¯·é€‰æ‹©å®Œæ•´çš„åœ°åŒºä¿¡æ¯');\r\n    return;\r\n  }\r\n\r\n  //æ€§åˆ«åˆ¤æ–­\r\n  let genders\r\n  if (formData.gender === 'ç”·') { \r\n    genders = 0;\r\n  }else {\r\n      genders = 1;\r\n    }\r\n  //å†œå†è½¬å…¬å†\r\n  // æœˆä»½æ˜ å°„è¡¨\r\n  const monthMap = {\r\n    'æ­£æœˆ': 1, 'äºŒæœˆ': 2, 'ä¸‰æœˆ': 3, 'å››æœˆ': 4, 'äº”æœˆ': 5, 'å…­æœˆ': 6,\r\n    'ä¸ƒæœˆ': 7, 'å…«æœˆ': 8, 'ä¹æœˆ': 9, 'åæœˆ': 10, 'åä¸€æœˆ': 11, 'åäºŒæœˆ': 12,\r\n    'é—°æ­£æœˆ': 1, 'é—°äºŒæœˆ': 2, 'é—°ä¸‰æœˆ': 3, 'é—°å››æœˆ': 4, 'é—°äº”æœˆ': 5, 'é—°å…­æœˆ': 6,\r\n    'é—°ä¸ƒæœˆ': 7, 'é—°å…«æœˆ': 8, 'é—°ä¹æœˆ': 9, 'é—°åæœˆ': 10, 'é—°åä¸€æœˆ': 11, 'é—°åäºŒæœˆ': 12\r\n  };\r\n\r\n  let solarDate;\r\n  let lunarMonth = monthMap[formData.month]; \r\n  let isLeap = false;\r\n  if (formData.calendarType === 'å†œå†') {\r\n    console.log('ç¡®å®šå†œå†æ—¥æœŸï¼š', formData.year, lunarMonth, formData.day);\r\n    if (formData.month.startsWith('é—°')) {\r\n      isLeap = true;\r\n    }\r\n    const lunarDate = window.p.Lunar2Solar(formData.year, lunarMonth, formData.day, isLeap);\r\n    console.log('è½¬æ¢åçš„å…¬å†æ—¥æœŸï¼š', lunarDate);\r\n    if (lunarDate === false) {\r\n      alert('è¯·æ£€æŸ¥å†œå†æ—¥æœŸæ˜¯å¦æ­£ç¡®');\r\n      return;\r\n    }\r\n    solarDate = { year: lunarDate[0], month: lunarDate[1], day: lunarDate[2] };\r\n    \r\n    console.log('è½¬æ¢åçš„å…¬å†æ—¥æœŸï¼š', solarDate);\r\n  } else {\r\n    solarDate =  { year: formData.year, month: formData.month, day: formData.day }; // å…¬å†ä¸‹ç›´æ¥ä½¿ç”¨åŸæœˆä»½å€¼\r\n  }\r\n  //ç»çº¬åº¦\r\n  const selectedCity = cities.find(c => c.name === formData.city);\r\n  if (!selectedCity) {\r\n    alert('è¯·é€‰æ‹©æœ‰æ•ˆçš„åŸå¸‚ä¿¡æ¯');\r\n    return;\r\n  }\r\n  const J = selectedCity.j;\r\n  const W = selectedCity.w;\r\n  //å…«å­—æ’ç›˜\r\n  const eightCharacters = window.p.fatemaps(\r\n    genders,\r\n    solarDate.year,\r\n    solarDate.month,\r\n    solarDate.day,\r\n    parseInt(formData.hour),\r\n    parseInt(formData.minute),\r\n    0,\r\n    J,\r\n    W\r\n  );\r\n \r\n  const transformUserData = (raw, datetimeStr) => {\r\n    let txt = \"\";\r\n    // ç”Ÿæˆå…«å­—ä¿¡æ¯\r\n      // æ·»åŠ å‡ºç”Ÿæ—¶é—´ä¿¡æ¯\r\n    txt += \"å‡ºç”Ÿæ—¶é—´ï¼š\" + datetimeStr + \"\\n\";\r\n    txt += \"å…«å­—ï¼š\";\r\n    txt += raw.sz.join(', ') + \"\\n\";\r\n    // ç”Ÿæˆæ€§åˆ«ä¿¡æ¯\r\n    txt += \"æ€§åˆ«ï¼š\" + raw.xb + \"\\n\";\r\n    // ç”Ÿæˆå¤§è¿ä¿¡æ¯\r\n    txt += \"å¤§è¿ï¼š\";\r\n    let dyItems = [];\r\n    // é™åˆ¶éå†5æ¬¡\r\n    for (let i = 0; i < 7 && raw['dy'] && i < Object.keys(raw['dy']).length; i++) {\r\n      let a = raw['dy'][i];\r\n      dyItems.push(`${a['zfma']}${a['zfmb']}`);\r\n    }\r\n    txt += dyItems.length > 0 ? dyItems.join(', ') + \"\\n\" : \"æ— å¤§è¿æ•°æ®\\n\";\r\n    return txt; // ç¡®ä¿å‡½æ•°è¿”å›ç”Ÿæˆçš„æ–‡æœ¬\r\n  };\r\n  \r\n  // console.log(eightCharacter);\r\n  const datetimeStr = [\r\n    formData.name,\r\n    solarDate.year,\r\n    solarDate.month,\r\n    solarDate.day,\r\n    `${parseInt(formData.hour)}:${parseInt(formData.minute).toString().padStart(2, '0')}`\r\n  ].join('/');\r\n  const eightCharacter = transformUserData(eightCharacters,datetimeStr);\r\n  console.log(eightCharacter);\r\n  onSubmit( eightCharacter); // ç¡®ä¿çˆ¶ç»„ä»¶ä¼ é€’äº†onSubmit\r\n};\r\n\r\n\r\n  return (\r\n    <form onSubmit={handleSubmit} className={styles.formContainer}>\r\n      {/* å§“åè¡Œ */}\r\n      <div className={styles.formRow}>\r\n        <div className={styles.inputGroup}>\r\n          <input\r\n            type=\"text\"\r\n            placeholder=\"è¯·è¾“å…¥æ‚¨çš„å§“åï¼ˆé€‰å¡«ï¼‰\"\r\n            className={styles.underlineInput}\r\n            value={formData.name}\r\n            onChange={(e) => setFormData({...formData, name: e.target.value})}\r\n          />\r\n        </div>\r\n      </div>\r\n\r\n      {/* æ€§åˆ«å’Œå†æ³•é€‰æ‹©è¡Œ */}\r\n      <div className={styles.formRow}>\r\n        <div className={styles.buttonGroup}>\r\n          {['ç”·', 'å¥³'].map((gender) => (\r\n            <button\r\n              key={gender}\r\n              type=\"button\"\r\n              className={`${styles.choiceButton} ${\r\n                formData.gender === gender ? styles.active : ''\r\n              }`}\r\n              onClick={() => setFormData({...formData, gender})}\r\n            >\r\n              {gender}\r\n            </button>\r\n          ))}\r\n        </div>\r\n        <div className={styles.buttonGroup}>\r\n          {['å…¬å†', 'å†œå†'].map((type) => (\r\n            <button\r\n              key={type}\r\n              type=\"button\"\r\n              className={`${styles.choiceButton} ${\r\n                formData.calendarType === type ? styles.active : ''\r\n              }`}\r\n              onClick={() => setFormData({...formData, calendarType: type})}\r\n            >\r\n              {type}\r\n            </button>\r\n          ))}\r\n        </div>\r\n      </div>\r\n\r\n      {/* å‡ºç”Ÿæ—¥æœŸé€‰æ‹©è¡Œ */}\r\n      <div className={styles.formRow1}>\r\n        <div className={styles.dateSelectGroup}>\r\n        <select \r\n            value={formData.year}\r\n            onChange={(e) => setFormData({...formData, year: e.target.value})}\r\n            className={styles.dateSelect}\r\n          >\r\n            <option value=\"\">å¹´</option>\r\n            {years.map((year) => (\r\n              <option key={year} value={year}>{year}</option>\r\n            ))}\r\n          </select>\r\n          <select\r\n            value={formData.month}\r\n            onChange={(e) => setFormData({...formData, month: e.target.value})}\r\n            className={styles.dateSelect}\r\n          >\r\n            <option value=\"\">æœˆ</option>\r\n            {updateMonthOptions().map((month, index) => (\r\n              <option key={index} value={month}>{month}</option>\r\n            ))}\r\n          </select>\r\n          <select\r\n            value={formData.day}\r\n            onChange={(e) => setFormData({...formData, day: e.target.value})}\r\n            className={styles.dateSelect}\r\n          >\r\n            <option value=\"\">æ—¥</option>\r\n            {days.map((day) => (\r\n              <option key={day} value={day}>{day}</option>\r\n            ))}\r\n          </select>\r\n        </div>\r\n      </div>\r\n\r\n      {/* å‡ºç”Ÿæ—¶é—´é€‰æ‹© */}\r\n      <div className={styles.formRow}>\r\n        <div className={styles.timeSelectGroup}>\r\n          <select\r\n            value={formData.hour}\r\n            onChange={(e) => setFormData({...formData, hour: e.target.value})}\r\n            className={styles.dateSelect}\r\n          >\r\n            {hours.map((hour) => (\r\n              <option key={hour} value={hour}>{hour}æ—¶</option>\r\n            ))}\r\n          </select>\r\n  \r\n          <select\r\n            value={formData.minute}\r\n            onChange={(e) => setFormData({...formData, minute: e.target.value})}\r\n            className={styles.dateSelect}\r\n          >\r\n            {minutes.map((minute) => (\r\n              <option key={minute} value={minute}>{minute}åˆ†</option>\r\n            ))}\r\n          </select>\r\n        </div>\r\n      </div>\r\n\r\n      {/* çœå¸‚è”åŠ¨é€‰æ‹©è¡Œ */}\r\n  \r\n      <div className={styles.formRow3}>\r\n        <select\r\n          value={formData.province}\r\n          onChange={handleProvinceChange}\r\n          className={styles.underlineInput}\r\n          style={{ marginRight: '20px' }}\r\n        >\r\n          <option value=\"unknown\">é€‰æ‹©çœä»½</option>\r\n          {provinces.map(province => (\r\n            <option key={province.id} value={province.name}>{province.name}</option>\r\n          ))}\r\n        </select>\r\n\r\n        <select\r\n          value={formData.city}\r\n          onChange={handleCityChange}\r\n          className={styles.underlineInput}\r\n          disabled={!formData.province || formData.province === 'unknown'}\r\n        >\r\n          <option value=\"unknown\">\r\n            {formData.province === 'unknown' ? 'å…ˆé€‰æ‹©çœä»½' : 'é€‰æ‹©åŸå¸‚'}\r\n          </option>\r\n          {filteredCities.map(city => (\r\n            <option key={city.id} value={city.name}>{city.name}</option>\r\n          ))}\r\n        </select>\r\n      </div>\r\n          \r\n\r\n      {/* æ’ç›˜æŒ‰é’®è¡Œ */}\r\n      <div className={styles.formRow}>\r\n        <button type=\"submit\" className={styles.submitButton}>\r\n          ç«‹å³è§£é”å‘½ç›˜ç„æœº\r\n        </button>\r\n      </div>\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default Form;","// src/components/PaymentModal.jsx\r\nimport React, { useEffect, useState } from 'react';\r\nimport { QRCodeSVG } from 'qrcode.react'; \r\nimport PropTypes from 'prop-types';\r\n\r\nconst PaymentModal = ({ isOpen, qrcodeUrl, onClose }) => {\r\n  const [countdown, setCountdown] = useState(600); // é»˜è®¤10åˆ†é’Ÿ\r\n  // å€’è®¡æ—¶æ•ˆæœ\r\n  useEffect(() => {\r\n    if (!isOpen) return;\r\n\r\n    const timer = setInterval(() => {\r\n      setCountdown(prev => Math.max(0, prev - 1));\r\n    }, 1000);\r\n\r\n    return () => clearInterval(timer);\r\n  }, [isOpen]);\r\n\r\n  // æ ¼å¼åŒ–æ—¶é—´æ˜¾ç¤º\r\n  const formatTime = (seconds) => {\r\n    const mins = Math.floor(seconds / 60);\r\n    const secs = seconds % 60;\r\n    return `${mins}:${secs.toString().padStart(2, '0')}`;\r\n  };\r\n\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <div className=\"payment-modal\">\r\n      <div className=\"modal-content\">\r\n        <div className=\"modal-header\">\r\n          <h3>æ‰«ç æ”¯ä»˜ Â¥1.99</h3>\r\n          <button className=\"close-button\" onClick={onClose}>Ã—</button>\r\n        </div>\r\n        \r\n        <div className=\"qrcode-wrapper\">\r\n          {qrcodeUrl ? (\r\n            <>\r\n              <QRCodeSVG \r\n                value={qrcodeUrl} \r\n                size={200}\r\n                fgColor=\"#2d3748\"\r\n                level=\"H\"\r\n              />\r\n              <p className=\"countdown\">å‰©ä½™æ—¶é—´: {formatTime(countdown)}</p>\r\n            </>\r\n          ) : (\r\n            <div className=\"loading\">æ­£åœ¨ç”Ÿæˆæ”¯ä»˜ç ...</div>\r\n          )}\r\n        </div>\r\n\r\n        <div className=\"modal-footer\">\r\n          <p>è¯·ä¿å­˜äºŒç»´ç ï¼Œä½¿ç”¨æ”¯ä»˜å®æ‰«æå®Œæˆæ”¯ä»˜</p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nPaymentModal.propTypes = {\r\n  isOpen: PropTypes.bool.isRequired,\r\n  qrcodeUrl: PropTypes.string,\r\n  onClose: PropTypes.func.isRequired\r\n};\r\n\r\nexport default PaymentModal;\r\n","import React from 'react';\r\nimport '../App.css';\r\n\r\nconst ReconnectingStatus = ({ analysisType }) => {\r\n  return (\r\n    <div className=\"reconnecting-overlay\">\r\n      <div className=\"reconnecting-message\">\r\n        <h3>æ­£åœ¨æ¢å¤{analysisType}å†…å®¹...</h3>\r\n        <p>è¯·ç¨å€™ï¼Œå·²è´­ä¹°çš„å†…å®¹å°†å¾ˆå¿«æ¢å¤æ˜¾ç¤º</p>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ReconnectingStatus;\r\n","import ReactMarkdown from \"react-markdown\";\r\nimport React, { useRef, useEffect, useState } from 'react';\r\nimport html2canvas from 'html2canvas';\r\nimport ReconnectingStatus from './ReconnectingStatus';\r\n\r\n\r\nconst ANALYSIS_TYPES = [ \r\n  { id: 'health', name: 'å¥åº·åˆ†æ', icon: 'â¤ï¸', color: '#ED7D31' },\r\n  { id: 'career', name: 'äº‹ä¸šåˆ†æ', icon: 'ğŸ’¼', color: '#005293' },\r\n  { id: 'wealth', name: 'è´¢è¿åˆ†æ', icon: 'ğŸ’°', color: '#8064A6' },\r\n  { id: 'marriage', name: 'å©šå§»åˆ†æ', icon: 'ğŸ’', color: '#A3CE27' }\r\n];\r\n\r\nconst AnalysisSection = ({ preview, unlocked, contents, onUnlock, onGoBack, onComplete }) => {\r\n  const [displayContent, setDisplayContent] = useState('');\r\n  const [blurContent, setBlurContent] = useState('');\r\n  const [selectedType, setSelectedType] = useState(null);\r\n  const [loadingType, setLoadingType] = useState(null);\r\n  const [isReconnecting, setIsReconnecting] = useState(false);\r\n  const [reconnectingType, setReconnectingType] = useState(null);\r\n  const contentRef = useRef(null);\r\n \r\n  const [isShared, setIsShared] = useState(false);\r\n  const [isCopied, setIsCopied] = useState(false);\r\n\r\n  // ä¿®æ”¹åˆ†äº«å¤„ç†å‡½æ•°\r\n  const handleShare = async () => {\r\n    try {\r\n      // å…ˆæ‰§è¡Œå¤åˆ¶æ“ä½œ\r\n      await navigator.clipboard.writeText(window.location.href);\r\n      setIsCopied(true);\r\n      \r\n      // æ˜¾ç¤ºæç¤º2ç§’åå¼¹å‡ºç¡®è®¤å¯¹è¯æ¡†\r\n      setTimeout(async () => {\r\n        const hasShared = await window.confirm(\r\n          'é“¾æ¥å·²å¤åˆ¶ï¼\\n\\nè¯·å°†é“¾æ¥åˆ†äº«åˆ°ç¤¾äº¤å¹³å°\\næ˜¯å¦å·²å®Œæˆåˆ†äº«ï¼Ÿ'\r\n        );\r\n        if (hasShared) {\r\n          setIsShared(true);\r\n        }\r\n      }, 1000);\r\n  \r\n      // éšè—å¤åˆ¶æˆåŠŸæç¤º\r\n      setTimeout(() => setIsCopied(false), 3000);\r\n    } catch (err) {\r\n      alert('è¯·æ‰‹åŠ¨å¤åˆ¶åœ°å€æ é“¾æ¥');\r\n      setTimeout(async () => {\r\n        const hasShared = await window.confirm(\r\n          'è¯·å°†é“¾æ¥åˆ†äº«åˆ°ç¤¾äº¤å¹³å°\\næ˜¯å¦å·²å®Œæˆåˆ†äº«ï¼Ÿ'\r\n        );\r\n        if (hasShared) {\r\n          setIsShared(true);\r\n        }\r\n      }, 1000);\r\n  \r\n    }\r\n  };\r\n  \r\n  const watermarkImage = new Image();\r\n  watermarkImage.src = '/qrcode.png'; // å‡†å¤‡äºŒç»´ç å›¾ç‰‡\r\n  \r\n  const handleScreenshot = async () => {\r\n    try {\r\n      // ç¬¬ä¸€æ­¥ï¼šæ•è·åŸå§‹å†…å®¹\r\n      const canvas = await html2canvas(contentRef.current, {\r\n        useCORS: true,\r\n        allowTaint: true,\r\n        logging: false,\r\n      });\r\n  \r\n      // ç¬¬äºŒæ­¥ï¼šåˆ›å»ºæ°´å°ç”»å¸ƒ\r\n      const watermarkCanvas = document.createElement('canvas');\r\n      const ctx = watermarkCanvas.getContext('2d');\r\n      \r\n      // è®¾ç½®ç”»å¸ƒå°ºå¯¸\r\n      watermarkCanvas.width = canvas.width;\r\n      watermarkCanvas.height = canvas.height;\r\n  \r\n      // ç¬¬ä¸‰æ­¥ï¼šç»˜åˆ¶åŸå§‹å†…å®¹\r\n      ctx.drawImage(canvas, 0, 0);\r\n      \r\n      // === æ–°å¢ï¼šæ·»åŠ æ–‡å­—æŠ¬å¤´ ===\r\n      ctx.fillStyle = '#FF0000'; // æ–‡å­—é¢œè‰²\r\n      ctx.font = 'bold 48px Microsoft YaHei'; // å­—ä½“æ ·å¼\r\n      ctx.textAlign = 'center'; // æ°´å¹³å±…ä¸­\r\n      ctx.textBaseline = 'top'; // å‚ç›´å¯¹é½ä»é¡¶éƒ¨å¼€å§‹\r\n      ctx.fillText('ğŸŒŸ æœ¬æŠ¥å‘Šç”±æ·±æ™ºAIå‘½ç†å¼•æ“ç”Ÿæˆ | www.mingli.xin', canvas.width / 2, 30);\r\n\r\n      // äºŒç»´ç æ°´å°ï¼ˆå³ä¸‹è§’ï¼‰\r\n      ctx.globalAlpha = 0.8;\r\n      ctx.drawImage(\r\n        watermarkImage,\r\n        canvas.width - 300, // xåæ ‡ä¸å˜ï¼Œå³è¾¹è·150\r\n        100, // yåæ ‡æ”¹ä¸º30ï¼Œé¡¶éƒ¨è¾¹è·30\r\n        284,\r\n        318\r\n        );\r\n  \r\n      // ç¬¬äº”æ­¥ï¼šç”Ÿæˆæœ€ç»ˆå›¾ç‰‡\r\n      const finalUrl = watermarkCanvas.toDataURL('image/png');\r\n  \r\n      // ç¬¬å…­æ­¥ï¼šè§¦å‘ä¸‹è½½\r\n      const link = document.createElement('a');\r\n      link.href = finalUrl;\r\n      link.download = `å‘½ç†åˆ†ææŠ¥å‘Š_${new Date().toLocaleDateString()}.png`;\r\n      document.body.appendChild(link);\r\n      link.click();\r\n      document.body.removeChild(link);\r\n  \r\n    } catch (error) {\r\n      console.error('æˆªå›¾å¤±è´¥:', error);\r\n      alert('ç”ŸæˆæŠ¥å‘Šå¤±è´¥ï¼Œè¯·ç¨åé‡è¯•');\r\n    }\r\n  };\r\n  \r\n  // å†…å®¹åˆ†å‰²é€»è¾‘ä¼˜åŒ–\r\n  useEffect(() => {\r\n    if (typeof preview === 'string' && preview.length > 0) {\r\n      const splitIndex = Math.floor(preview.length * 0.9);\r\n      setDisplayContent(preview.slice(0, splitIndex));\r\n      setBlurContent(preview.slice(splitIndex));\r\n    }\r\n  }, [preview]);\r\n\r\n  // æ£€æŸ¥æ¯ç§åˆ†æç±»å‹æ˜¯å¦æ­£åœ¨æ¢å¤\r\n  useEffect(() => {\r\n    ANALYSIS_TYPES.forEach(type => {\r\n      const analysisId = localStorage.getItem(`paid_analysis_${type.id}`);\r\n      // å¦‚æœæœ‰å­˜å‚¨çš„åˆ†æIDä½†å†…å®¹è¿˜æ²¡æœ‰åŠ è½½ï¼Œæ˜¾ç¤ºé‡è¿çŠ¶æ€\r\n      if (analysisId && !contents[type.id] && !unlocked[type.id]) {\r\n        setIsReconnecting(true);\r\n        setReconnectingType(type.name);\r\n        return;\r\n      }\r\n    });\r\n    \r\n    // å¦‚æœæ‰€æœ‰å†…å®¹éƒ½å·²åŠ è½½æˆ–æ²¡æœ‰å­˜å‚¨çš„åˆ†æIDï¼Œéšè—é‡è¿çŠ¶æ€\r\n    if (isReconnecting) {\r\n      const allLoaded = ANALYSIS_TYPES.every(type => {\r\n        const analysisId = localStorage.getItem(`paid_analysis_${type.id}`);\r\n        return !analysisId || contents[type.id];\r\n      });\r\n      \r\n      if (allLoaded) {\r\n        setIsReconnecting(false);\r\n        setReconnectingType(null);\r\n      }\r\n    }\r\n  }, [contents, unlocked, isReconnecting]);\r\n\r\n  // å¤„ç†æ¨¡å—è§£é”\r\n  const handleUnlock = async (typeId) => {\r\n    if (unlocked[typeId] || loadingType) return;\r\n    \r\n    try {\r\n      setLoadingType(typeId);\r\n      // å¦‚æœæœ‰å­˜å‚¨çš„åˆ†æIDï¼Œè®¾ç½®é‡è¿çŠ¶æ€\r\n      const analysisId = localStorage.getItem(`paid_analysis_${typeId}`);\r\n      if (analysisId) {\r\n        setIsReconnecting(true);\r\n        setReconnectingType(ANALYSIS_TYPES.find(t => t.id === typeId)?.name || 'åˆ†æ');\r\n      }\r\n      await onUnlock(typeId);\r\n      setSelectedType(typeId); // è§£é”åè‡ªåŠ¨é€‰ä¸­\r\n    } catch (error) {\r\n      console.error('è§£é”å¤±è´¥:', error);\r\n    } finally {\r\n      setLoadingType(null);\r\n      // å¦‚æœå†…å®¹å·²åŠ è½½ï¼Œéšè—é‡è¿çŠ¶æ€\r\n      if (contents[typeId]) {\r\n        setIsReconnecting(false);\r\n        setReconnectingType(null);\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"analysis-container\" ref={contentRef}>\r\n      {/* æ˜¾ç¤ºé‡è¿çŠ¶æ€æç¤º */}\r\n      {isReconnecting && reconnectingType && (\r\n        <ReconnectingStatus analysisType={reconnectingType} />\r\n      )}\r\n\r\n      <h2>åŸºç¡€å‘½ç†åˆ†æ</h2>\r\n\r\n      {!onComplete ? (\r\n        <ReactMarkdown>{preview}</ReactMarkdown>\r\n      ) : (\r\n        <div className=\"preview-section\">\r\n          <ReactMarkdown>{displayContent}</ReactMarkdown>\r\n          {blurContent && (\r\n            <div className={`blur-section ${(selectedType || isShared) ? 'unlocked' : 'locked'}`}>\r\n              <ReactMarkdown>{blurContent}</ReactMarkdown>\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n\r\n      {onComplete && (\r\n        <>\r\n          <div className=\"share-section\">\r\n            {!(selectedType || isShared) && (\r\n              <div className=\"share-container\">\r\n                <button \r\n                  onClick={handleShare}\r\n                  className=\"share-trigger\"\r\n                >\r\n                  ğŸ”— å¤åˆ¶é“¾æ¥åˆ†äº«è§£é”\r\n                </button>\r\n                <span className=\"tooltip\">åˆ†äº«ç»™å¾®ä¿¡å¥½å‹å³å¯æŸ¥çœ‹å®Œæ•´è§£æ</span>\r\n              </div>\r\n            )}\r\n            \r\n            {isCopied && (\r\n              <div className=\"copied-notice\">\r\n                âœ… é“¾æ¥å·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼\r\n              </div>\r\n            )}\r\n          </div>\r\n          \r\n          {/* åˆ†ææ¨¡å—å¸ƒå±€ */}  \r\n          <div className=\"analysis-modules\">\r\n            {ANALYSIS_TYPES.map((type) => (\r\n              <div\r\n                key={type.id}\r\n                className={`analysis-module ${\r\n                  unlocked[type.id] ? 'unlocked' : 'locked'\r\n                } ${selectedType === type.id ? 'active' : ''}`}\r\n                style={{ backgroundColor: type.color }}\r\n                onClick={() => {\r\n                  if (unlocked[type.id]) {\r\n                    setSelectedType(type.id);\r\n                  } else {\r\n                    handleUnlock(type.id);\r\n                  }\r\n                }}\r\n              >\r\n                <div className=\"module-header\">\r\n                  <span className=\"icon\">{type.icon}</span>\r\n                  <h3>{type.name}</h3>\r\n                </div>  \r\n                <div className=\"module-status\">\r\n                  {loadingType === type.id ? (\r\n                    <div className=\"loader\" />\r\n                  ) : unlocked[type.id] ? (\r\n                    contents[type.id] ? 'âœ“ å·²è§£é”' : <div className=\"loader\" />\r\n                  ) : (\r\n                    localStorage.getItem(`paid_analysis_${type.id}`) ? \r\n                    'æ­£åœ¨æ¢å¤...' : \r\n                    'ï¿¥1.99è§£é”'\r\n                  )}\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n\r\n          {/* è¯¦ç»†åˆ†æå†…å®¹å±•ç¤º */}\r\n          {selectedType && unlocked[selectedType] && (\r\n            <div className=\"detail-content\">\r\n              <ReactMarkdown>{contents[selectedType]}</ReactMarkdown>\r\n            </div>\r\n          )}\r\n        </>\r\n      )}\r\n      <button className=\"action-button back\" onClick={onGoBack}>\r\n        â† è¿”å›ä¸»é¡µ\r\n      </button>\r\n      <button className=\"action-button screenshot\" onClick={handleScreenshot}>\r\n        ğŸ“¸ æˆªå›¾ä¿å­˜\r\n      </button>\r\n\r\n      <div className=\"disclaimer\">\r\n        <p>â€» æœ¬åˆ†æç”±AIç”Ÿæˆï¼Œä»…ä¾›å¨±ä¹å‚è€ƒï¼Œä¸ä½œä¸ºå†³ç­–ä¾æ®</p>\r\n        <p>â€» æ ¹æ®ç›¸å…³æ³•è§„ï¼Œæ‰€æœ‰æ•°æ®å°†åœ¨24å°æ—¶åè‡ªåŠ¨åˆ é™¤</p>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AnalysisSection;\r\n","// const BASE_URL = process.env.NODE_ENV === 'development' \r\n//   ? 'http://localhost:5000' \r\n//   : 'http://8.133.207.19:5000';\r\n\r\nconst BASE_URL =\"http://localhost:5000\"\r\n\r\n// ä¸ºä»˜è´¹åˆ†ææ·»åŠ è‡ªåŠ¨æ¢å¤åŠŸèƒ½çš„EventSource\r\nconst createEventSourceWithRecovery = (url, handlers, analysisType = null) => {\r\n  // å¦‚æœæ˜¯ä»˜è´¹åˆ†æä¸”æœ‰åˆ†æç±»å‹ï¼Œæ·»åŠ æ¢å¤æ ‡è®°\r\n  if (analysisType) {\r\n    // æ£€æŸ¥æœ¬åœ°å­˜å‚¨ä¸­æ˜¯å¦æœ‰è¯¥ç±»å‹çš„åˆ†æID\r\n    const analysisId = localStorage.getItem(`paid_analysis_${analysisType}`);\r\n    if (analysisId) {\r\n      // å¦‚æœæœ‰ï¼Œæ·»åŠ åˆ°URLä¸­\r\n      const separator = url.includes('?') ? '&' : '?';\r\n      url = `${url}${separator}recovery=true&analysisId=${analysisId}`;\r\n      console.log(`å°è¯•æ¢å¤ä»˜è´¹å†…å®¹: ${analysisType}, ID: ${analysisId}`);\r\n    }\r\n  }\r\n  \r\n  const es = new EventSource(url);\r\n  \r\n  es.onopen = () => {\r\n    console.log('SSEè¿æ¥å·²å»ºç«‹');\r\n  };\r\n\r\n  es.onerror = (err) => {\r\n    console.error('SSEè¿æ¥é”™è¯¯:', err);\r\n    handlers.onError?.('è¿æ¥å·²æ–­å¼€,è¯·åˆ·æ–°é¡µé¢é‡è¯•');\r\n    es.close();\r\n  };\r\n\r\n  return es;\r\n};\r\n\r\n// åˆ›å»ºå…«å­—åˆ†æSSEæµ\r\nexport const createOrderStream = (eightCharacters, handlers) => {\r\n  const url = `${BASE_URL}/api/orders/stream?eightCharacters=${encodeURIComponent(eightCharacters)}`;\r\n  const es = createEventSourceWithRecovery(url, handlers);\r\n\r\n  // ç›‘å¬ä¸åŒç±»å‹çš„äº‹ä»¶\r\n  es.addEventListener('stream', (e) => {\r\n    const data = JSON.parse(e.data);\r\n    handlers.onStream?.(data.content); // æµå¼ä¼ è¾“å†…å®¹\r\n  });\r\n\r\n  es.addEventListener('stream_end', (e) => {\r\n    const data = JSON.parse(e.data);\r\n    handlers.onComplete?.(data.orderId); // æµå¼ä¼ è¾“ç»“æŸ\r\n    es.close();\r\n  });\r\n\r\n  es.addEventListener('error', (e) => {\r\n    if(e.data) {\r\n      const data = JSON.parse(e.data);\r\n      handlers.onError?.(data.message);\r\n      es.close();\r\n    }\r\n  });\r\n\r\n  return es;\r\n};\r\n\r\n// æ”¯ä»˜å’Œè¯¦ç»†åˆ†æSSEæµ\r\nexport const initiatePayment = (prevOrderId, analysisType, handlers) => {\r\n  const url = `${BASE_URL}/api/orders/${prevOrderId}/payment?type=${analysisType}`;\r\n  const es = createEventSourceWithRecovery(url, handlers, analysisType);\r\n\r\n  // ç›‘å¬æ”¯ä»˜ç›¸å…³äº‹ä»¶\r\n  es.addEventListener('payment', (e) => {\r\n    const data = JSON.parse(e.data);\r\n    handlers.onPaymentQR?.(data.qrcodeUrl, data.orderId); \r\n    // ä¿å­˜åˆ†æè®¢å•IDï¼Œæ–¹ä¾¿æ¢å¤\r\n    if (data.orderId) {\r\n      localStorage.setItem(`paid_analysis_${analysisType}`, data.orderId);\r\n    }\r\n  });\r\n\r\n  // æ·»åŠ å…¨å†…å®¹æ¢å¤äº‹ä»¶\r\n  es.addEventListener('full_content', (e) => {\r\n    try {\r\n      const data = JSON.parse(e.data);\r\n      if (data && data.content) {\r\n        console.log(`æ¢å¤å®Œæ•´ä»˜è´¹å†…å®¹: ${analysisType}`);\r\n        handlers.onAnalysisRestore?.(data.content);\r\n        // æ ‡è®°ä¸ºå·²è§£é”\r\n        handlers.onPaymentstatus?.();\r\n      }\r\n    } catch (error) {\r\n      console.error('è§£æfull_contentäº‹ä»¶å¤±è´¥:', error);\r\n    }\r\n  });\r\n\r\n  // ç›‘å¬åˆ†æå†…å®¹æµå¼ä¼ è¾“\r\n  es.addEventListener('stream', (e) => {\r\n    const data = JSON.parse(e.data);\r\n    handlers.onAnalysisChunk?.(data.content); // æµå¼ä¼ è¾“è¯¦ç»†åˆ†æ\r\n  });\r\n\r\n  es.addEventListener('stream_end', () => {\r\n    handlers.onAnalysisEnd?.(); // è¯¦ç»†åˆ†æä¼ è¾“ç»“æŸ\r\n    es.close();\r\n  });\r\n\r\n  es.addEventListener('error', (e) => {\r\n    if(e.data) {\r\n      const data = JSON.parse(e.data);\r\n      handlers.onError?.(data.message);\r\n      es.close();\r\n    }\r\n  });\r\n\r\n  return es;\r\n};","import React, { useState, useEffect } from 'react';\nimport Form from './components/Form';\nimport PaymentModal from './components/PaymentModal';\nimport AnalysisSection from './components/AnalysisSection';\nimport './App.css';\nimport { createOrderStream, initiatePayment } from './api';\n\nconst ANALYSIS_TYPES = [\n  { id: 'health', name: 'å¥åº·åˆ†æ' },\n  { id: 'career', name: 'äº‹ä¸šåˆ†æ' },\n  { id: 'wealth', name: 'è´¢è¿åˆ†æ' },\n  { id: 'marriage', name: 'å©šå§»åˆ†æ' }\n];\n\nfunction App() {\n  const [analysisData, setAnalysisData] = useState({\n    currentOrderId: null,\n    preview: '',\n    unlocked: {},\n    contents: {\n      health: null,\n      career: null,\n      wealth: null,\n      marriage: null\n    }\n  });\n  const [paymentState, setPaymentState] = useState({\n    show: false,\n    qrcodeUrl: '',\n    processingType: null\n  });\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n  const [es, setES] = useState(null);\n\n  // æ–°å¢å‡½æ•°ï¼šå°†åˆ†ææ•°æ®ä¿å­˜åˆ°æœ¬åœ°å­˜å‚¨\n  const saveAnalysisToLocalStorage = (data) => {\n    // ç¡®ä¿dataæ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„å¯¹è±¡\n    if (typeof data !== 'object' || data === null) {\n      console.error('æ— æ³•ä¿å­˜æ— æ•ˆçš„åˆ†ææ•°æ®:', data);\n      return;\n    }\n  \n    try {\n      localStorage.setItem('analysisData', JSON.stringify(data));\n    } catch (error) {\n      console.error('ä¿å­˜åˆ†ææ•°æ®åˆ°æœ¬åœ°å­˜å‚¨å¤±è´¥:', error);\n    }\n  };\n  \n  // æ–°å¢å‡½æ•°ï¼šä»æœ¬åœ°å­˜å‚¨åŠ è½½åˆ†ææ•°æ®\n  const loadAnalysisFromLocalStorage = () => {\n    // console.log('å¼€å§‹ä»æœ¬åœ°å­˜å‚¨åŠ è½½åˆ†ææ•°æ®');\n    const data = localStorage.getItem('analysisData');\n    // console.log('ä»æœ¬åœ°å­˜å‚¨è·å–çš„æ•°æ®:', data);\n    if (data) {\n      try {\n        const parsedData = JSON.parse(data);\n        // console.log('è§£æåçš„åˆ†ææ•°æ®:', parsedData);\n  \n        // ç¡®ä¿æ•°æ®æ ¼å¼æ­£ç¡®\n        if (\n          typeof parsedData === 'object' &&\n          parsedData !== null &&\n          typeof parsedData.preview === 'string' &&\n          typeof parsedData.unlocked === 'object' &&\n          typeof parsedData.contents === 'object'\n        ) {\n          return parsedData;\n        } else {\n          console.error('æœ¬åœ°å­˜å‚¨ä¸­çš„åˆ†ææ•°æ®æ ¼å¼ä¸æ­£ç¡®');\n          return null;\n        }\n      } catch (error) {\n        console.error('è§£ææœ¬åœ°å­˜å‚¨ä¸­çš„åˆ†ææ•°æ®å¤±è´¥:', error);\n        return null;\n      }\n    }\n    return null;\n  };\n\n  const clearAnalysisData = () => {\n    try {\n      localStorage.removeItem('analysisData');\n      setAnalysisData({\n        currentOrderId: null,\n        preview: '',\n        unlocked: {},\n        contents: { health: '', career: '', wealth: '', marriage: '' }\n      });\n    } catch (error) {\n      console.error('æ¸…é™¤åˆ†ææ•°æ®å¤±è´¥:', error);\n    }\n  };\n  \n  const handleSubmit = async (eightCharacters) => {\n    setLoading(true);\n    setError('');\n    setAnalysisData({\n      preview: '',\n      unlocked: {},\n      contents: { health: '', career: '', wealth: '', marriage: '' }\n    });\n\n    const newES = createOrderStream(eightCharacters, {\n      // æ¥æ”¶æµå¼å†…å®¹\n      onStream: (chunk) => {\n        setAnalysisData(prev => ({\n          ...prev,\n          preview: prev.preview + chunk\n        }));\n        setLoading(false);\n      },\n      // æµå¼ä¼ è¾“å®Œæˆ\n      onComplete: (prevOrderId) => {\n        setAnalysisData(prev => ({\n          ...prev,\n          currentOrderId: prevOrderId\n        }));\n      },\n      // é”™è¯¯å¤„ç†\n      onError: (message) => {\n        setError(message || 'ç”Ÿæˆé¢„è§ˆå¤±è´¥');\n        setLoading(false);\n      }\n    });\n    setES(newES);\n  };\n\n  const unlockAnalysis = (type) => {\n    if (!analysisData.currentOrderId) return;\n    console.log(\"é€‰æ‹©åˆ†æ\",type);\n    \n    setPaymentState({\n      show: true,\n      qrcodeUrl: '',\n      processingType: type\n    });\n\n    const paymentES = initiatePayment(analysisData.currentOrderId, type, {\n      // æ¥æ”¶æ”¯ä»˜äºŒç»´ç \n      onPaymentQR: (qrcodeUrl, orderId) => {\n        setPaymentState(prev => ({ ...prev, qrcodeUrl }));\n      },\n      // æ¥æ”¶æµå¼åˆ†æå†…å®¹\n      onAnalysisChunk: (chunk) => {\n        setAnalysisData(prev => ({\n          ...prev,\n          contents: {\n            ...prev.contents,\n            [type]: (prev.contents[type] || '') + chunk\n          }\n        }));\n      },\n      // æ”¯ä»˜æˆåŠŸ\n      onPaymentstatus: () => {\n        setAnalysisData(prev => ({\n          ...prev,\n          unlocked: { ...prev.unlocked, [type]: true }\n        }));\n        setPaymentState({ show: false, qrcodeUrl: '', processingType: null });\n      },\n      // æ·»åŠ æ¢å¤å¤„ç†å™¨\n      onAnalysisRestore: (fullContent) => {\n        setAnalysisData(prev => ({\n          ...prev,\n          contents: {\n            ...prev.contents,\n            [type]: fullContent\n          },\n          unlocked: {\n            ...prev.unlocked,\n            [type]: true\n          }\n        }));\n        setPaymentState({ show: false, qrcodeUrl: '', processingType: null });\n      },\n      // è¯¦ç»†åˆ†æç»“æŸ\n      onAnalysisEnd: () => {\n      },\n      // é”™è¯¯å¤„ç†\n      onError: (message) => {\n        setError(message || 'æ”¯ä»˜æµç¨‹å‡ºé”™');\n        setPaymentState({ show: false, qrcodeUrl: '', processingType: null });\n      }\n    });\n\n    setES(paymentES);\n  };\n\n  useEffect(() => {\n    if (analysisData.preview) { // ä»…åœ¨éç©ºæ—¶æ‰§è¡Œ\n      saveAnalysisToLocalStorage(analysisData);\n    }\n  }, [analysisData]); \n  \n\n\n  useEffect(() => {\n    // ä»æœ¬åœ°å­˜å‚¨åŠ è½½åˆ†ææ•°æ®\n    const loadedData = loadAnalysisFromLocalStorage();\n    if (loadedData) {\n      setAnalysisData(loadedData);\n    }\n    return () => es?.close();\n  }, [es]);\n\n\n  return (\n    <div className=\"App\">\n      <header className=\"header\">\n        <div className=\"header-content\">\n          <div className=\"branding\">\n            <h1>MingLiç†å‘½</h1>\n            <p className=\"slogan\">ä¸€é˜´ä¸€é˜³ä¹‹è°“é“</p>\n          </div>\n          <div className=\"logo-container\">\n            <img src=\"/logo.png\" alt=\"Logo\" className=\"logo\" />\n          </div>\n        </div>\n      </header>\n\n        {error && <div className=\"error-message\">{error}</div>}\n        \n        {loading ? (\n            <div className=\"loading-wrapper\">\n            <div className=\"loading\">\n              â³ æ·±åº¦åˆ†æé€šå¸¸éœ€è¦ 0~1 åˆ†é’Ÿ\n              <div className=\"sub-hint\">ï¼ˆæœŸé—´è¯·ä¸è¦åˆ·æ–°é¡µé¢ï¼‰</div>\n            </div>\n          </div>\n        ) : (\n          !analysisData.preview ? (\n            <Form onSubmit={handleSubmit} />\n          ) : (\n            <AnalysisSection \n              preview={analysisData.preview}\n              unlocked={analysisData.unlocked}\n              contents={analysisData.contents}\n              onUnlock={unlockAnalysis}\n              analysisTypes={ANALYSIS_TYPES}\n              onGoBack={clearAnalysisData}\n              onComplete={analysisData.currentOrderId}\n            />\n          )\n        )}\n\n        <PaymentModal\n          isOpen={paymentState.show}\n          qrcodeUrl={paymentState?.qrcodeUrl}\n          onClose={() => setPaymentState({ show: false, qrcode: '', processingType: null })}\n        />\n    \n      <footer>\n        <div className=\"sfooterContent\">\n          <p className=\"sdisclaimer\">\n            æ‹’ç»å‘æœªæˆå¹´äººæä¾›æœåŠ¡ï¼Œä»…ä¾›å¨±ä¹å’Œå‚è€ƒã€‚\n          </p>\n          <p className=\"sdisclaimer\">\n          Â©2025 MingLiç†å‘½\n          </p>\n        </div>\n      </footer>\n\n    </div>\n    \n  );\n}\n\nexport default App;\n\n\n\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom/client';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nconst root = ReactDOM.createRoot(document.getElementById('root'));\nroot.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}